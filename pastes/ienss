py
def post(path, headers, data=None, debug=False, method=None):
    url = urlparse.urljoin(URL, path)
    # TODO: pass the parameter dict
    if "?" in url:
        url = "%s&v=%s" % (url, VERSION)
    else:
        url = "%s?v=%s" % (url, VERSION)
    logging.debug("ECollegeClient url = %s" % url)

    if isinstance(data, dict):
        data = urllib.urlencode(data)

    req = urllib2.Request(url, data, headers)
    if method is not None:
        req.get_method = lambda: method

    if debug:
        pp(req.__dict__)

    try:
        result = knurllib2.urlopen(req)
        code = result.code
        payload = result.read()
    except urllib2.HTTPError, e:
        raise EcollegeHTTPError, e, sys.exc_info()[2]

    if debug:
        pp(code)